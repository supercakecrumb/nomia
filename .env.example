# =============================================================================
# Baby Name Statistics Platform - Environment Configuration
# =============================================================================
# This file contains all configuration options for the application.
# Copy this file to .env and adjust values as needed.
#
# For Docker deployment, most values are pre-configured in docker-compose.yml
# For local development, adjust the DATABASE_URL to point to your local database
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# Connection string format: postgres://user:password@host:port/database?options
#
# For local development:
DATABASE_URL=postgres://user:password@localhost:5432/affirm_name?sslmode=disable
#
# For Docker (automatically set in docker-compose.yml):
# DATABASE_URL=postgres://affirm_user:affirm_password@postgres:5432/affirm_name?sslmode=disable

# Connection pool settings
DATABASE_MAX_CONNECTIONS=100
DATABASE_MAX_IDLE=10
DATABASE_CONN_MAX_LIFETIME=1h
DATABASE_CONN_MAX_IDLE_TIME=10m

# -----------------------------------------------------------------------------
# Storage Configuration
# -----------------------------------------------------------------------------
# Storage type: "local" for filesystem, "s3" for AWS S3
STORAGE_TYPE=local

# Local storage path (used when STORAGE_TYPE=local)
# For Docker: /app/uploads (mounted as volume)
# For local: ./uploads
STORAGE_PATH=./uploads

# -----------------------------------------------------------------------------
# S3 Configuration (only needed if STORAGE_TYPE=s3)
# -----------------------------------------------------------------------------
# S3_BUCKET=affirm-name-uploads
# S3_REGION=us-east-1
# S3_ENDPOINT=https://s3.amazonaws.com
# AWS_ACCESS_KEY_ID=your_access_key_id
# AWS_SECRET_ACCESS_KEY=your_secret_access_key

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
# HTTP server settings
SERVER_PORT=8080
SERVER_READ_TIMEOUT=30s
SERVER_WRITE_TIMEOUT=30s
SERVER_IDLE_TIMEOUT=120s

# -----------------------------------------------------------------------------
# Worker Configuration
# -----------------------------------------------------------------------------
# Background worker settings for processing uploaded datasets
WORKER_CONCURRENCY=4
WORKER_POLL_INTERVAL=5s
WORKER_MAX_RETRIES=3

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level: debug, info, warn, error
LOG_LEVEL=info

# Log format: json (for production), text (for development)
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Uncomment and configure for frontend applications
# CORS_ALLOWED_ORIGINS=http://localhost:3000,https://your-frontend.com
# CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
# CORS_ALLOWED_HEADERS=Authorization,Content-Type,X-Request-ID

# -----------------------------------------------------------------------------
# Rate Limiting (Future Feature)
# -----------------------------------------------------------------------------
# RATE_LIMIT_ADMIN=100
# RATE_LIMIT_PUBLIC=1000

# -----------------------------------------------------------------------------
# Docker-Specific Notes
# -----------------------------------------------------------------------------
# When running with Docker Compose:
# 1. Database credentials are set in docker-compose.yml
# 2. Storage path is automatically set to /app/uploads
# 3. Network connectivity is handled by Docker networking
# 4. Health checks are configured in docker-compose.yml
#
# For development with docker-compose.dev.yml:
# - LOG_LEVEL is set to "debug"
# - LOG_FORMAT is set to "text"
# - WORKER_CONCURRENCY is reduced to 2
# - pgAdmin is available at http://localhost:5050